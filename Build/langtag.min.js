/*
#  langtag  #
üåêüè∑ A RegExp‚Äêbased BCP47 parser

___

Copyright (C) 2018 Kyebego

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

The GNU General Public License is available online at
<https://www.gnu.org/licenses/>.

___

##  Usage:

Simply pass the `BCP47()` constructor a language tag.

    var bcp47 = new BCP47("en-CA");
*/
"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(function(){var _BCP,buildSubtagArray,gatherSubtagsFrom,globalObject,regex,_splitTags;if(regex=/^(?:(x(?:-[0-9A-Za-z]{1,8})+)|((en-GB-oed|i-(?:ami|bnn|default|enochian|hak|klingon|lux|mingo|navajo|pwn|tao|tay|tsu)|sgn-(?:BE-FR|BE-NL|CH-DE))|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-(?:guoyu|hakka|min(?:-nan)?|xiang)))|(([A-Za-z]{2,3}(?:-([A-Za-z]{3}(?:-[A-Za-z]{3}){0,2}))?|[A-za-z]{4}|[A-Za-z]{5,8})(?:-([A-Za-z]{4}))?(?:-([A-Za-z]{2}|\d{3}))?(?:-((?:[0-9A-Za-z]{5,8}|\d[0-9A-Za-z]{3})(?:-(?:[0-9A-Za-z]{5,8}|\d[0-9A-Za-z]{3}))*))?(?:-((?:(?:[0-9]|[A-W]|[Y-Z]|[a-w]|[y-z])(?:-[0-9A-Za-z]{2,8})+)(?:-(?:[0-9A-WY-Za-wy-z](?:-[0-9A-Za-z]{2,8})+))*))?(?:-(x(?:-[0-9A-Za-z]{1,8})+))?))$/,_splitTags=function(input){return null==input?[]:input instanceof Array?Array.prototype.reduce.call(input,function(result,current){return result.push.apply(result,_toConsumableArray(_splitTags(current))),result},[]):String.prototype.split.call(input,"-")},gatherSubtagsFrom=function(subtags){var tags;if((tags=_splitTags(subtags)).length)return 1===tags.length?tags[0]||void 0:tags},buildSubtagArray=function(tag){var _tags,ref,ref1,ref2,ref3,ref4,ref5,ref6,tags;return null==tag?[]:(tags=null!=(ref=tag.langtag)?ref:null!=(ref1=tag.privateuse)?ref1:null!=(ref2=tag.grandfathered)?ref2:null!=(ref3=tag.irregular)?ref3:tag.regular)?_splitTags(tags):(tags=null!=tag.language)?(_tags=tags=_splitTags(tags)).push.apply(_tags,_toConsumableArray(_splitTags(tag.script)).concat(_toConsumableArray(_splitTags(tag.region)),_toConsumableArray(_splitTags(null!=(ref4=tag.variant)?ref4:tag.variants)),_toConsumableArray(_splitTags(null!=(ref5=tag.extension)?ref5:tag.extensions)),_toConsumableArray(_splitTags(null!=(ref6=tag.privateuse)?ref6:tag.privateUse)))):_splitTags(tag,"-")},_BCP=function(tag){var extensions,extlang,grandfathered,i,index,irregular,langtag,language,len,match,privateuse,privateuseonly,region,regular,result,script,subtag,subtags,variants;if(null==tag||!(match=String.prototype.match.call(tag,regex)))throw new TypeError("Language tag not well-formed under BCP47.");var _match2=_slicedToArray(match,13);for(match=_match2[0],privateuseonly=_match2[1],grandfathered=_match2[2],irregular=_match2[3],regular=_match2[4],langtag=_match2[5],language=_match2[6],extlang=_match2[7],script=_match2[8],region=_match2[9],variants=_match2[10],extensions=_match2[11],privateuse=_match2[12],result=this instanceof _BCP?this:Object.create(_BCP.prototype),Object.defineProperties(result,{langtag:{value:gatherSubtagsFrom(langtag)},language:{value:gatherSubtagsFrom(language)},extlang:{value:gatherSubtagsFrom(extlang)},script:{value:gatherSubtagsFrom(script)},region:{value:gatherSubtagsFrom(region)},variant:{value:gatherSubtagsFrom(variants)},extension:{value:gatherSubtagsFrom(extensions)},singleton:{value:gatherSubtagsFrom(_splitTags(extensions).filter(function(subtag){return 1===subtag.length}))},privateuse:{value:gatherSubtagsFrom(null!=privateuse?privateuse:privateuseonly)},grandfathered:{value:gatherSubtagsFrom(grandfathered)},irregular:{value:gatherSubtagsFrom(irregular)},regular:{value:gatherSubtagsFrom(regular)}}),index=i=0,len=(subtags=_splitTags(match)).length;i<len;index=++i)subtag=subtags[index],Object.defineProperty(result,index,{enumerable:!0,value:subtag});return Object.defineProperty(result,"length",{value:subtags.length})},Object.defineProperty(_BCP,"prototype",{writable:!1,value:Object.defineProperties({},{constructor:{value:_BCP},toString:{value:function(){return buildSubtagArray(this).join("-")}},valueOf:{value:function(){return buildSubtagArray(this)}}})}),Object.defineProperties(_BCP,{regex:{enumerable:!0,value:regex},test:{enumerable:!0,value:function(tag){return regex.test(tag)}},"test«É":{enumerable:!0,value:function(tag){if(!regex.test(tag))throw new TypeError("Language tag not well-formed under to BCP47.")}}}),null==(globalObject="undefined"!=typeof self&&null!==self?self:"undefined"!=typeof window&&null!==window?window:"undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof global&&null!==global?global:null))throw new ReferenceError("Unknown global object.");Object.defineProperties(globalObject,_defineProperty({BCP47:{configurable:!0,value:_BCP}},"".concat("üåê").concat("üè∑"),{configurable:!0,value:_BCP})),Object.defineProperties(_BCP,{"‚Ñπ":{value:"https://go.KIBI.family/langtag/"},"N¬∫":{value:Object.freeze({major:1,minor:0,patch:1,toString:function(){return"".concat(this.major,".").concat(this.minor,".").concat(this.patch)},valueOf:function(){return 100*this.major+this.minor+this.patch/100}})},context:{writable:!0,value:"undefined"!=typeof self&&null!==self?self:"undefined"!=typeof window&&null!==window?window:{}}})}).call(void 0);
